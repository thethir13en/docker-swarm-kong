# **Docker Swarm Configuration for Kong API Gateway**
Данная конфигурация позволяет быстро развернуть Kong API Gateway и Konga Dashboard, при помощи оркестратора Docker Swarm.

# Характеристики
* **Konga Dashboard** присутствует по-умолчанию
* Использует официальные образы **Kong**, **MongoDB**, **PostgreSQL**
* Чувствительные данные передаются переменными
* Персистентные данные используют мехнизм ```volumes``` **Docker**
* Использует **Gitlab CI** для быстрого развертывания
* Присутствует **cAdvisor** для отслеживания метрик контейнеров

# Требования
Для запуска приложения необходимы:
* кластер **Docker Swarm**, он может состоять из 1 ноды
* **Graylog** - по-умолчанию сервисы шлют туда логи

# Конфигурация
Для настройки параметров необходимо создать переменные окружения перед развертыванием стека:

* **POSTGRES_USER** - пользователь **PostgreSQL**, используется Kong для авторизации в БД
* **POSTGRES_DB** - база **PostgreSQL**, используется Kong для хранения конфигурации
* **GRAYLOG_ADDR** - адрес **Graylog** для отправки логов сервисов
* **GRAYLOG_PORT** - порт **Graylog** для отправки логов сервисов
* **ENVIRONMENT** (опционально) - окружение развертывания, значение передается в **Konga Dashboard**
* **KONGA_TOKEN_SECRET** (опционально) - JWT токен для **Konga Dashboard**

# Запуск
На мастер-ноде, в кластере **Docker Swarm** выполните команду:
```
docker stack deploy -c docker-compose.yml ${НАЗВАНИЕ_ВАЩЕГО_СТЕКА}
```

# To-do

* Конфигурация для запуска без Graylog
* Конфигурация для локального запуска
* Улучшеное параметризирование (Количество реплик и тд.)
